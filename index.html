<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë””ì§€í„¸ êµì‹¤ ì²­ì†Œ ëŒ€ì‘ì „ - íƒ€ì„ì–´íƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            font-family: 'Jua', sans-serif;
            overflow: hidden;
            cursor: none;
            user-select: none;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes float-score {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }
        .animate-score {
            animation: float-score 0.8s ease-out forwards;
        }

        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 3s infinite ease-in-out;
        }

        @keyframes pulse-red {
            0%, 100% { color: #ef4444; transform: scale(1); }
            50% { color: #b91c1c; transform: scale(1.1); }
        }
        .urgent-timer {
            animation: pulse-red 0.5s infinite;
        }

        .fill-gauge {
            width: 0%;
            transition: width 1.5s linear;
        }
        .group:hover .fill-gauge {
            width: 100%;
        }

        .clean-item {
            transition: transform 0.2s;
            cursor: none;
        }
        
        #custom-cursor {
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.05s ease-out;
        }
    </style>
</head>
<body class="bg-sky-50 w-full h-screen relative flex flex-col items-center justify-center">

    <!-- ë°°ê²½ ì¥ì‹ -->
    <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none opacity-30">
        <div class="absolute top-10 left-10 w-32 h-32 bg-yellow-200 rounded-full blur-2xl"></div>
        <div class="absolute bottom-20 right-20 w-40 h-40 bg-blue-200 rounded-full blur-2xl"></div>
    </div>

    <!-- ì»¤ìŠ¤í…€ ì»¤ì„œ -->
    <div id="custom-cursor" class="fixed top-0 left-0 text-5xl drop-shadow-lg transform -translate-x-1/2 -translate-y-1/2">
        ğŸ‘†
    </div>

    <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
    <div id="app-container" class="relative z-10 w-full max-w-5xl p-4 flex flex-col items-center">
        
        <!-- 1. ì¸íŠ¸ë¡œ í™”ë©´ -->
        <div id="intro-screen" class="text-center w-full">
            <div class="mb-8 relative">
                <!-- ë‹¤ì˜¨ì´ ìºë¦­í„° -->
                <svg class="w-48 h-48 mx-auto mb-6 animate-bounce-slow" viewBox="0 0 100 100">
                    <circle cx="50" cy="40" r="30" fill="#fcd34d" />
                    <circle cx="50" cy="40" r="25" fill="#fca5a5" />
                    <path d="M 25 40 Q 50 20 75 40" stroke="#374151" stroke-width="0" fill="#374151" />
                    <circle cx="40" cy="40" r="3" fill="#000" />
                    <circle cx="60" cy="40" r="3" fill="#000" />
                    <path d="M 45 50 Q 50 55 55 50" stroke="#000" stroke-width="2" fill="none" />
                    <rect x="35" y="45" width="5" height="3" fill="#f87171" rx="2" opacity="0.5" />
                    <rect x="60" y="45" width="5" height="3" fill="#f87171" rx="2" opacity="0.5" />
                    <path d="M 20 70 Q 50 60 80 70 L 80 100 L 20 100 Z" fill="#fcd34d" />
                </svg>
                
                <h1 class="text-6xl md:text-7xl text-blue-600 mb-4 drop-shadow-md">ë””ì§€í„¸ êµì‹¤ ì²­ì†Œ!</h1>
                <p class="text-2xl text-gray-600 bg-white/70 py-2 px-6 rounded-full inline-block shadow-sm mb-2">
                    ì‹œê°„ ì•ˆì— ë§ˆìš°ìŠ¤ë¡œ ë¨¼ì§€ë¥¼ ë‹¦ì•„ì¤˜!
                </p>
            </div>

            <div id="start-btn" class="group relative w-80 h-24 bg-white rounded-3xl border-4 border-yellow-400 shadow-xl mx-auto flex items-center justify-center overflow-hidden transform transition-transform hover:scale-105">
                <div id="start-progress" class="fill-gauge absolute left-0 top-0 h-full bg-yellow-300"></div>
                <div class="relative z-10 flex items-center gap-3 text-3xl text-gray-700 font-bold">
                    <span class="animate-pulse">ğŸ–±ï¸ ê²Œì„ ì‹œì‘í•˜ê¸°</span>
                </div>
            </div>
        </div>

        <!-- 2. ê²Œì„ í”Œë ˆì´ í™”ë©´ -->
        <div id="game-screen" class="hidden w-full max-w-4xl animate-fade-in-up">
            <!-- ìƒë‹¨ HUD (ì ìˆ˜, ì‹œê°„, ì§„í–‰ë„) -->
            <div class="flex justify-between items-center mb-4 bg-white p-4 rounded-3xl shadow-xl border-4 border-blue-100">
                <!-- ë ˆë²¨ & ì‹œê°„ -->
                <div class="flex items-center gap-6">
                    <div class="flex flex-col items-center">
                        <span class="text-sm text-gray-400 font-bold">LEVEL</span>
                        <div id="level-display" class="text-4xl text-yellow-500 font-black">1</div>
                    </div>
                    <div class="w-px h-10 bg-gray-200"></div>
                    <div class="flex flex-col items-start w-32">
                        <span class="text-sm text-gray-400 font-bold">TIME</span>
                        <div id="timer-display" class="text-4xl text-gray-700 font-bold">30</div>
                    </div>
                </div>

                <!-- ì¤‘ì•™ ë©”ì‹œì§€ -->
                <div id="center-msg" class="text-2xl text-blue-500 font-bold hidden md:block">
                    ë¨¼ì§€ë¥¼ ë‹¦ìœ¼ì„¸ìš”!
                </div>

                <!-- ì ìˆ˜ -->
                <div class="text-right">
                    <span class="text-sm text-gray-400 font-bold">SCORE</span>
                    <div id="score-display" class="text-4xl text-blue-600 font-black">0</div>
                </div>
            </div>

            <!-- ê²Œì„ ì˜ì—­ -->
            <div class="relative w-full aspect-video bg-white rounded-3xl shadow-2xl p-3 overflow-hidden border-8 border-slate-700">
                <div id="game-area" class="w-full h-full rounded-2xl relative overflow-hidden bg-gray-800">
                    <!-- ë°°ê²½ ì¥ì‹ -->
                    <div id="bg-decoration" class="absolute inset-0 flex items-center justify-center text-gray-700 text-9xl opacity-20 select-none pointer-events-none font-black">
                        START
                    </div>
                    <!-- ì•„ì´í…œ ë ˆì´ì–´ -->
                    <div id="items-layer" class="w-full h-full absolute top-0 left-0 z-10"></div>
                    <!-- ì ìˆ˜ íš¨ê³¼ ë ˆì´ì–´ -->
                    <div id="effects-layer" class="w-full h-full absolute top-0 left-0 z-20 pointer-events-none"></div>
                </div>
                
                <!-- ì§„í–‰ë°” (í•˜ë‹¨ì— ì–‡ê²Œ) -->
                <div class="absolute bottom-0 left-0 w-full h-2 bg-gray-200">
                    <div id="progress-bar" class="bg-green-400 h-full transition-all duration-200" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- 3. ì‹¤íŒ¨(ì‹œê°„ ì´ˆê³¼) í™”ë©´ -->
        <div id="fail-screen" class="hidden absolute z-50 top-0 left-0 w-full h-full bg-black/60 backdrop-blur-sm flex items-center justify-center">
            <div class="bg-white p-8 rounded-3xl shadow-2xl text-center border-4 border-red-400 animate-bounce-slow">
                <div class="text-6xl mb-4">â°</div>
                <h2 class="text-5xl text-red-500 font-bold mb-4">ì‹œê°„ ì´ˆê³¼!</h2>
                <p class="text-2xl text-gray-600 mb-8">ì¡°ê¸ˆë§Œ ë” ì„œë‘ë¥´ë©´ í•  ìˆ˜ ìˆì–´!</p>
                <button onclick="retryLevel()" class="px-8 py-3 bg-red-400 text-white rounded-full text-2xl font-bold hover:bg-red-500 transform hover:scale-105 transition shadow-lg">
                    ë‹¤ì‹œ ë„ì „í•˜ê¸°
                </button>
            </div>
        </div>

        <!-- 4. ë ˆë²¨ í´ë¦¬ì–´ í™”ë©´ -->
        <div id="clear-screen" class="hidden absolute z-50 top-0 left-0 w-full h-full bg-white/80 backdrop-blur-sm flex items-center justify-center">
            <div class="text-center">
                <div class="text-9xl mb-4 animate-bounce">ğŸŒŸ</div>
                <h2 class="text-6xl text-blue-600 font-black mb-4 drop-shadow-md">ì„±ê³µ!</h2>
                <div class="bg-white px-8 py-4 rounded-2xl shadow-lg border-2 border-yellow-200 mb-4 inline-block">
                    <p class="text-xl text-gray-500">ì‹œê°„ ë³´ë„ˆìŠ¤</p>
                    <p id="bonus-points" class="text-4xl text-yellow-500 font-bold">+500</p>
                </div>
            </div>
        </div>

        <!-- 5. ìµœì¢… ì™„ë£Œ í™”ë©´ -->
        <div id="final-screen" class="hidden w-full max-w-2xl bg-white/95 p-10 rounded-3xl shadow-2xl border-8 border-yellow-300 text-center backdrop-blur-md">
            <div class="flex justify-center items-center gap-4 mb-8">
                <span class="text-6xl">ğŸ†</span>
                <h1 class="text-5xl text-gray-800 font-black">ì²­ì†Œ ì™„ë£Œ!</h1>
                <span class="text-6xl">ğŸ†</span>
            </div>
            
            <div class="bg-blue-50 rounded-2xl p-8 mb-8 border-2 border-blue-100">
                <p class="text-2xl text-gray-500 mb-2">ë‚˜ì˜ ìµœì¢… ì ìˆ˜ëŠ”?</p>
                <p id="final-score" class="text-7xl text-blue-600 font-black drop-shadow-sm">0ì </p>
                <div id="rank-badge" class="mt-4 inline-block px-6 py-2 bg-yellow-400 text-white text-2xl font-bold rounded-full shadow">
                    ì²­ì†Œ ëŒ€ì¥
                </div>
            </div>

            <p class="text-xl text-gray-600 mb-8">
                "ì´ì œ ê¹¨ë—í•œ ë…¸íŠ¸ë¶ìœ¼ë¡œ<br>ë””ì§€í„¸ ì„¸ìƒì„ íƒí—˜í•´ ë³¼ê¹Œìš”?"
            </p>

            <button onclick="location.reload()" class="px-12 py-5 bg-blue-500 hover:bg-blue-600 text-white text-3xl font-bold rounded-full shadow-lg transform transition hover:scale-105 flex items-center justify-center gap-3 mx-auto">
                <i data-lucide="refresh-ccw"></i> ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°
            </button>
        </div>

    </div>

    <!-- ì˜¤ë””ì˜¤ (íš¨ê³¼ìŒìš© - ì‹¤ì œ íŒŒì¼ ì—†ì´ JSë¡œ í†¤ ìƒì„±ì€ ë³µì¡í•˜ë¯€ë¡œ ì‹œê° íš¨ê³¼ì— ì§‘ì¤‘) -->

    <script>
        lucide.createIcons();

        // ê²Œì„ ì„¤ì •
        const LEVELS = [
            { id: 1, title: "í™”ë©´ ë‹¦ê¸°", time: 40, items: 15, type: 'dust', bg: 'bg-gray-800', cursor: 'âœ¨', msg: "í™”ë©´ì˜ ë¨¼ì§€ë¥¼ ë‹¦ì•„ì¤˜!" },
            { id: 2, title: "í‚¤ë³´ë“œ ì²­ì†Œ", time: 35, items: 20, type: 'crumb', bg: 'bg-gray-200', cursor: 'ğŸ’¨', msg: "ê³¼ì ë¶€ìŠ¤ëŸ¬ê¸°ë¥¼ í„¸ì–´ì¤˜!" },
            { id: 3, title: "ì±…ìƒ ì •ë¦¬", time: 30, items: 25, type: 'trash', bg: 'bg-orange-100', cursor: 'ğŸ§¹', msg: "ì±…ìƒ ìœ„ ì“°ë ˆê¸°ë¥¼ ì¹˜ì›Œì¤˜!" }
        ];

        // ìƒíƒœ ë³€ìˆ˜
        let currentLevelIdx = 0;
        let score = 0;
        let timeLeft = 0;
        let itemsLeft = 0;
        let timerInterval = null;
        let isPlaying = false;
        let startHoverTimer = null;

        // DOM ìš”ì†Œ
        const els = {
            cursor: document.getElementById('custom-cursor'),
            screens: {
                intro: document.getElementById('intro-screen'),
                game: document.getElementById('game-screen'),
                fail: document.getElementById('fail-screen'),
                clear: document.getElementById('clear-screen'),
                final: document.getElementById('final-screen')
            },
            displays: {
                level: document.getElementById('level-display'),
                time: document.getElementById('timer-display'),
                score: document.getElementById('score-display'),
                msg: document.getElementById('center-msg'),
                bonus: document.getElementById('bonus-points'),
                finalScore: document.getElementById('final-score'),
                rank: document.getElementById('rank-badge')
            },
            gameArea: document.getElementById('game-area'),
            itemsLayer: document.getElementById('items-layer'),
            effectsLayer: document.getElementById('effects-layer'),
            progressBar: document.getElementById('progress-bar'),
            bgDeco: document.getElementById('bg-decoration'),
            startBtn: document.getElementById('start-btn')
        };

        // ì»¤ì„œ ì´ë™
        document.addEventListener('mousemove', (e) => {
            els.cursor.style.left = e.clientX + 'px';
            els.cursor.style.top = e.clientY + 'px';
        });

        // ì‹œì‘ ë²„íŠ¼ í˜¸ë²„
        els.startBtn.addEventListener('mouseenter', () => {
            startHoverTimer = setTimeout(startGame, 1500);
        });
        els.startBtn.addEventListener('mouseleave', () => {
            clearTimeout(startHoverTimer);
        });

        function startGame() {
            score = 0;
            currentLevelIdx = 0;
            updateScore(0);
            switchScreen('game');
            loadLevel(currentLevelIdx);
        }

        function loadLevel(idx) {
            const levelData = LEVELS[idx];
            
            // ë ˆë²¨ ì´ˆê¸°í™”
            itemsLeft = levelData.items;
            timeLeft = levelData.time;
            isPlaying = true;
            
            // UI ì—…ë°ì´íŠ¸
            els.displays.level.innerText = levelData.id;
            els.displays.time.innerText = timeLeft;
            els.displays.time.classList.remove('urgent-timer');
            els.displays.msg.innerText = levelData.msg;
            els.cursor.innerText = levelData.cursor;
            els.gameArea.className = `w-full h-full rounded-2xl relative overflow-hidden ${levelData.bg}`;
            els.progressBar.style.width = '0%';
            
            // ë°°ê²½ ë°ì½”
            if (idx === 1) { // í‚¤ë³´ë“œ íŒ¨í„´
                let grid = '<div class="absolute inset-0 grid grid-cols-10 grid-rows-5 gap-1 p-4 opacity-50">';
                for(let i=0; i<50; i++) grid += '<div class="bg-white rounded-sm shadow-sm"></div>';
                grid += '</div>';
                els.bgDeco.innerHTML = grid;
            } else {
                els.bgDeco.innerText = idx === 0 ? "DISPLAY" : "DESK";
            }

            // ì•„ì´í…œ ìƒì„±
            createItems(levelData);

            // íƒ€ì´ë¨¸ ì‹œì‘
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(gameLoop, 1000);
        }

        function createItems(data) {
            els.itemsLayer.innerHTML = '';
            els.effectsLayer.innerHTML = ''; // ì´ì „ íš¨ê³¼ ì œê±°

            for (let i = 0; i < data.items; i++) {
                const item = document.createElement('div');
                item.className = 'clean-item absolute flex items-center justify-center transition-opacity duration-200';
                
                // ëœë¤ ìœ„ì¹˜ (íŒ¨ë”© ê³ ë ¤ 10~90%)
                item.style.left = (Math.random() * 80 + 10) + '%';
                item.style.top = (Math.random() * 80 + 10) + '%';
                item.style.transform = `rotate(${Math.random() * 360}deg)`;

                // ì•„ì´í…œ ëª¨ì–‘
                if (data.type === 'dust') {
                    item.innerHTML = '<div class="w-10 h-10 bg-gray-400 rounded-full blur-md opacity-70"></div>';
                } else if (data.type === 'crumb') {
                    item.innerHTML = '<div class="text-3xl">ğŸª</div>';
                } else if (data.type === 'trash') {
                    const icons = ['ğŸ§ƒ', 'ğŸ“„', 'ğŸ¬', 'âœï¸'];
                    item.innerHTML = `<div class="text-4xl">${icons[Math.floor(Math.random()*icons.length)]}</div>`;
                }

                // í˜¸ë²„ ì´ë²¤íŠ¸
                item.onmouseenter = (e) => cleanItem(item, e);
                els.itemsLayer.appendChild(item);
            }
        }

        function cleanItem(item, e) {
            if (!isPlaying || item.classList.contains('cleaned')) return;
            item.classList.add('cleaned');

            // ì ìˆ˜ ì¶”ê°€ (ê¸°ë³¸ 100ì )
            updateScore(100);
            
            // ì‹œê° íš¨ê³¼: ì•„ì´í…œ ì‚¬ë¼ì§
            item.style.opacity = '0';
            item.style.transform = 'scale(1.5)';
            setTimeout(() => item.remove(), 200);

            // ì‹œê° íš¨ê³¼: ì ìˆ˜ íŒì—… (+100)
            showFloatingScore(e.clientX, e.clientY);

            // ì§„í–‰ë„ ì²´í¬
            itemsLeft--;
            const total = LEVELS[currentLevelIdx].items;
            const percent = ((total - itemsLeft) / total) * 100;
            els.progressBar.style.width = percent + '%';

            if (itemsLeft <= 0) {
                levelClear();
            }
        }

        function showFloatingScore(x, y) {
            const float = document.createElement('div');
            float.innerText = '+100';
            float.className = 'absolute text-3xl font-black text-yellow-500 animate-score pointer-events-none z-50';
            
            // ê²Œì„ ì˜ì—­ ê¸°ì¤€ ì¢Œí‘œë¡œ ë³€í™˜ (í™”ë©´ ì „ì²´ ê¸°ì¤€ì´ë©´ ìŠ¤í¬ë¡¤ì‹œ ë¬¸ì œë  ìˆ˜ ìˆìœ¼ë‚˜ fixedë©´ ok)
            // ì—¬ê¸°ì„  ì»¤ì„œ ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ í™”ë©´ ì „ì²´ bodyì— ë¶™ì´ì§€ ì•Šê³  effect layerì— ë¶™ì´ë ¤ë©´ ì¢Œí‘œ ê³„ì‚° í•„ìš”
            // ê°„ë‹¨í•˜ê²Œ effect layerê°€ game areaì™€ ê°™ìœ¼ë¯€ë¡œ, ë§ˆìš°ìŠ¤ ì¢Œí‘œ ëŒ€ì‹  relative ì¢Œí‘œ ì¨ì•¼í•¨.
            // ë³µì¡í•˜ë¯€ë¡œ í¸ì˜ìƒ ì•„ì´í…œ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ëŒ€ëµ ì¡ê±°ë‚˜, fixedë¡œ í™”ë©´ì— ë„ì›€.
            // ì—¬ê¸°ì„  fixedë¡œ bodyì— ì ê¹ ë„ìš°ëŠ”ê²Œ ì œì¼ ìì—°ìŠ¤ëŸ¬ì›€.
            
            float.style.left = x + 'px';
            float.style.top = y + 'px';
            float.style.position = 'fixed';
            
            document.body.appendChild(float);
            setTimeout(() => float.remove(), 800);
        }

        function gameLoop() {
            timeLeft--;
            els.displays.time.innerText = timeLeft;

            // ê¸´ë°•í•¨ íš¨ê³¼ (5ì´ˆ ì´í•˜)
            if (timeLeft <= 5) {
                els.displays.time.classList.add('urgent-timer');
            }

            if (timeLeft <= 0) {
                gameOver();
            }
        }

        function gameOver() {
            clearInterval(timerInterval);
            isPlaying = false;
            els.screens.fail.style.display = 'flex';
        }

        window.retryLevel = function() {
            els.screens.fail.style.display = 'none';
            loadLevel(currentLevelIdx); // í˜„ì¬ ë ˆë²¨ ì¬ì‹œì‘
        }

        function levelClear() {
            clearInterval(timerInterval);
            isPlaying = false;

            // ë³´ë„ˆìŠ¤ ì ìˆ˜ ê³„ì‚° (ë‚¨ì€ ì‹œê°„ * 50ì )
            const bonus = timeLeft * 50;
            updateScore(bonus);
            
            els.displays.bonus.innerText = `+${bonus}`;
            els.screens.clear.style.display = 'flex';

            setTimeout(() => {
                els.screens.clear.style.display = 'none';
                if (currentLevelIdx < LEVELS.length - 1) {
                    currentLevelIdx++;
                    loadLevel(currentLevelIdx);
                } else {
                    gameClear();
                }
            }, 2500);
        }

        function gameClear() {
            switchScreen('final');
            els.displays.finalScore.innerText = score + "ì ";
            
            // ì¹­í˜¸ ë¶€ì—¬
            let rank = "ì²­ì†Œ ìƒˆì‹¹ ğŸŒ±";
            if (score > 6000) rank = "ì „ì„¤ì˜ ì²­ì†Œë¶€ ğŸ‘‘";
            else if (score > 4000) rank = "ê¹”ë” ëŒ€ì¥ âœ¨";
            else if (score > 2000) rank = "ì„±ì‹¤í•œ ì²­ì†Œë¶€ ğŸ§¹";
            
            els.displays.rank.innerText = rank;
        }

        function updateScore(points) {
            score += points;
            // ìˆ«ì ì¹´ìš´íŒ… ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì£¼ë©´ ì¢‹ê² ì§€ë§Œ ê°„ë‹¨í•˜ê²Œ
            els.displays.score.innerText = score;
        }

        function switchScreen(name) {
            Object.values(els.screens).forEach(s => s.style.display = 'none');
            // flexê°€ í•„ìš”í•œ í™”ë©´ë“¤ì€ flexë¡œ, ì•„ë‹Œê±´ blockìœ¼ë¡œ
            if (name === 'game') els.screens.game.style.display = 'block';
            else if (['fail', 'clear'].includes(name)) els.screens[name].style.display = 'flex';
            else els.screens[name].style.display = 'block';
        }

    </script>
</body>
</html>
